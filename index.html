<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketInsight Pro AFFILIATE EDITION ğŸš€</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ’° MarketInsight Pro AFFILIATE EDITION</h1>
            <div class="subtitle">Detecta Productos Ganadores para Marketing de Afiliados</div>
            <div class="features">
                <span class="feature-badge">ğŸ¯ Productos Ganadores</span>
                <span class="feature-badge">ğŸ’µ AnÃ¡lisis de Comisiones</span>
                <span class="feature-badge">ğŸ“Š Competencia</span>
                <span class="feature-badge">ğŸ”¥ Tendencias</span>
                <span class="feature-badge">ğŸš€ ROI Estimado</span>
                <span class="feature-badge">ğŸ” Keywords</span>
            </div>
        </div>

        <div class="main-content">
            <!-- API Configuration -->
            <div class="api-section">
                <h3>ğŸ”‘ ConfiguraciÃ³n de Google AI Studio</h3>
                <p style="color: #a0aec0; margin-bottom: 15px;">Ingresa tu API Key de Google AI Studio:</p>
                <div class="input-group">
                    <input type="password" id="apiKey" placeholder="Tu API Key aquÃ­..." />
                    <button class="btn btn-warning" id="saveBtn">ğŸ’¾ Guardar</button>
                    <button class="btn btn-secondary" id="testBtn">ğŸ§ª Probar</button>
                </div>
                <div id="statusDiv"></div>
            </div>

            <!-- Main Form -->
            <div class="form-section">
                <h2>ğŸ¯ ConfiguraciÃ³n de BÃºsqueda de Productos Ganadores</h2>
                
                <!-- AnÃ¡lisis Options - Reorganizados -->
                <div class="analysis-sections">
                    <div class="analysis-group">
                        <h4>ğŸ“Š AnÃ¡lisis BÃ¡sicos</h4>
                        <div class="analysis-options basic-analysis">
                            <div class="option-card">
                                <input type="checkbox" id="analyzeCompetition" checked>
                                <label for="analyzeCompetition">ğŸ“Š AnÃ¡lisis de Competencia</label>
                            </div>
                            <div class="option-card">
                                <input type="checkbox" id="analyzeTrends" checked>
                                <label for="analyzeTrends">ğŸ“ˆ AnÃ¡lisis de Tendencias</label>
                            </div>
                            <div class="option-card">
                                <input type="checkbox" id="findAffiliates" checked>
                                <label for="findAffiliates">ğŸ¤ Programas de Afiliados</label>
                            </div>
                            <div class="option-card">
                                <input type="checkbox" id="analyzeKeywords" checked>
                                <label for="analyzeKeywords">ğŸ” Keywords Rentables</label>
                            </div>
                            <div class="option-card">
                                <input type="checkbox" id="analyzeSeasonality" checked>
                                <label for="analyzeSeasonality">ğŸ“… Estacionalidad</label>
                            </div>
                            <div class="option-card">
                                <input type="checkbox" id="analyzeProfitability" checked>
                                <label for="analyzeProfitability">ğŸ’° Rentabilidad</label>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-group">
                        <h4>â­ AnÃ¡lisis Expertos</h4>
                        <div class="analysis-options expert-analysis-group">
                            <div class="option-card expert-analysis">
                                <input type="checkbox" id="analyzeConversion" checked>
                                <label for="analyzeConversion">ğŸ¯ MÃ©tricas de ConversiÃ³n</label>
                                <small>CVR, EPC, AOV</small>
                            </div>
                            <div class="option-card expert-analysis">
                                <input type="checkbox" id="analyzeFinancial" checked>
                                <label for="analyzeFinancial">ğŸ’ AnÃ¡lisis Financiero</label>
                                <small>ROI, CPA, Profit Margin</small>
                            </div>
                            <div class="option-card expert-analysis">
                                <input type="checkbox" id="analyzeCompetitorIntel" checked>
                                <label for="analyzeCompetitorIntel">ğŸ•µï¸ Inteligencia Competitiva</label>
                                <small>Ad Spend, SaturaciÃ³n</small>
                            </div>
                            <div class="option-card expert-analysis">
                                <input type="checkbox" id="analyzeCustomerJourney" checked>
                                <label for="analyzeCustomerJourney">ğŸª Customer Journey</label>
                                <small>Touchpoints, Objeciones</small>
                            </div>
                            <div class="option-card expert-analysis">
                                <input type="checkbox" id="analyzeTrafficChannels" checked>
                                <label for="analyzeTrafficChannels">ğŸš€ Canales de TrÃ¡fico</label>
                                <small>CPC, Volumen, Potencial</small>
                            </div>
                            <div class="option-card expert-analysis">
                                <input type="checkbox" id="analyzeFunnels" checked>
                                <label for="analyzeFunnels">ğŸ”„ Funnels y Upsells</label>
                                <small>Cross-selling, LTV</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Basic Configuration -->
                <div class="config-section">
                    <h4>âš™ï¸ ConfiguraciÃ³n BÃ¡sica</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸ¯ Nicho de Mercado:</label>
                            <input type="text" id="nicho" placeholder="Ej: Fitness, TecnologÃ­a, Belleza..." value="Fitness y Bienestar">
                        </div>
                        <div class="form-group">
                            <label>ğŸ‘¥ PÃºblico Objetivo:</label>
                            <input type="text" id="publico" placeholder="Ej: Mujeres 25-35, Gamers..." value="Personas de 25-45 aÃ±os">
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸ’µ Rango de Precio Ideal:</label>
                            <select id="rangoPrecios">
                                <option value="bajo">$10 - $50 (Impulso)</option>
                                <option value="medio" selected>$50 - $200 (Considerado)</option>
                                <option value="alto">$200 - $500 (Premium)</option>
                                <option value="muy-alto">$500+ (Lujo)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“Š Tipo de Producto:</label>
                            <select id="tipoProducto">
                                <option value="fisico">Producto FÃ­sico</option>
                                <option value="digital" selected>Producto Digital</option>
                                <option value="servicio">Servicio/SuscripciÃ³n</option>
                                <option value="mixto">Mixto</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸª Canal Principal:</label>
                            <select id="canalPrincipal">
                                <option value="blog">Blog/SEO</option>
                                <option value="youtube">YouTube</option>
                                <option value="instagram">Instagram</option>
                                <option value="tiktok">TikTok</option>
                                <option value="email">Email Marketing</option>
                                <option value="paid" selected>Ads Pagados</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ğŸš€ Experiencia en Afiliados:</label>
                            <select id="experiencia">
                                <option value="principiante">Principiante</option>
                                <option value="intermedio" selected>Intermedio</option>
                                <option value="avanzado">Avanzado</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Expert Configuration -->
                <div class="expert-section">
                    <h3>ğŸ¯ ConfiguraciÃ³n Experta de Afiliado</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸ’° Presupuesto Publicitario Mensual:</label>
                            <select id="presupuestoAds">
                                <option value="0">Sin presupuesto (OrgÃ¡nico)</option>
                                <option value="500">$500 - $1,000</option>
                                <option value="1000" selected>$1,000 - $3,000</option>
                                <option value="3000">$3,000 - $5,000</option>
                                <option value="5000">$5,000 - $10,000</option>
                                <option value="10000">$10,000+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“Š Objetivo de ROI MÃ­nimo:</label>
                            <select id="roiObjetivo">
                                <option value="2">200% (2x)</option>
                                <option value="3" selected>300% (3x)</option>
                                <option value="4">400% (4x)</option>
                                <option value="5">500% (5x)</option>
                                <option value="10">1000% (10x)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>â±ï¸ Tolerancia de Break-Even:</label>
                            <select id="breakEvenTime">
                                <option value="inmediato">Inmediato (DÃ­a 1)</option>
                                <option value="semana">1 Semana</option>
                                <option value="mes" selected>1 Mes</option>
                                <option value="trimestre">3 Meses</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ğŸ¯ Tipo de ConversiÃ³n Preferida:</label>
                            <select id="tipoConversion">
                                <option value="inmediata" selected>Venta Inmediata</option>
                                <option value="lead">Lead Generation</option>
                                <option value="recurring">SuscripciÃ³n Recurrente</option>
                                <option value="alto-ticket">Alto Ticket</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸ“± Dispositivo Principal del PÃºblico:</label>
                            <select id="dispositivoTarget">
                                <option value="mobile" selected>MÃ³vil (70%+)</option>
                                <option value="desktop">Desktop (70%+)</option>
                                <option value="mixto">Mixto 50/50</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ğŸŒ Mercado GeogrÃ¡fico:</label>
                            <select id="mercadoGeo">
                                <option value="latam" selected>LatinoamÃ©rica</option>
                                <option value="usa">Estados Unidos</option>
                                <option value="europa">Europa</option>
                                <option value="global">Global</option>
                            </select>
                        </div>
                    </div>

                <!-- AGREGAR DESPUÃ‰S DE LA EXPERT-SECTION EN EL HTML EXISTENTE -->

                <!-- ===================== GENERADOR DE CONTENIDO VIRAL ===================== -->
                <div class="viral-content-section">
                    <h3>ğŸ¯ Generador de Contenido Viral</h3>
                    <p class="section-description">Genera contenido de alta conversiÃ³n para todos tus canales de marketing</p>
                    
                    <div class="content-type-selector">
                        <div class="content-type-grid">
                            <div class="content-type-card" data-type="tiktok">
                                <div class="content-icon">ğŸ“±</div>
                                <h4>TikTok/Reels</h4>
                                <p>Scripts virales de 15-60s</p>
                            </div>
                            <div class="content-type-card" data-type="email">
                                <div class="content-icon">ğŸ“§</div>
                                <h4>Email Marketing</h4>
                                <p>Subject lines que abren</p>
                            </div>
                            <div class="content-type-card" data-type="facebook">
                                <div class="content-icon">ğŸ“Š</div>
                                <h4>Facebook Ads</h4>
                                <p>Headlines ganadoras</p>
                            </div>
                            <div class="content-type-card" data-type="instagram">
                                <div class="content-icon">ğŸ“¸</div>
                                <h4>Instagram</h4>
                                <p>Posts con engagement</p>
                            </div>
                            <div class="content-type-card" data-type="blog">
                                <div class="content-icon">âœï¸</div>
                                <h4>Blog/SEO</h4>
                                <p>ArtÃ­culos optimizados</p>
                            </div>
                            <div class="content-type-card" data-type="youtube">
                                <div class="content-icon">ğŸ¥</div>
                                <h4>YouTube</h4>
                                <p>TÃ­tulos y thumbnails</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="content-config">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>ğŸ¯ Ãngulo de Venta Principal:</label>
                                <select id="salesAngle">
                                    <option value="problema-agitacion">Problema + AgitaciÃ³n</option>
                                    <option value="antes-despues">Antes vs DespuÃ©s</option>
                                    <option value="secreto-revelado">Secreto Revelado</option>
                                    <option value="autoridad-social">Autoridad Social</option>
                                    <option value="escasez-urgencia">Escasez + Urgencia</option>
                                    <option value="story-telling">Story Telling</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ğŸ˜± Nivel de Controversia:</label>
                                <select id="controversyLevel">
                                    <option value="safe">Seguro (Familiar)</option>
                                    <option value="medium" selected>Medio (Llamativo)</option>
                                    <option value="high">Alto (Viral)</option>
                                    <option value="extreme">Extremo (Riesgoso)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ğŸ”¥ Palabras de Poder (separadas por comas):</label>
                            <input type="text" id="powerWords" placeholder="gratis, secreto, exclusivo, limitado, revelado..." 
                                value="gratis, secreto, exclusivo, limitado, revelado, prohibido, oculto">
                        </div>
                    </div>
                    
                    <button class="btn btn-viral" id="generateContentBtn">
                        <span class="btn-icon">ğŸš€</span>
                        <span class="btn-text">Generar Contenido Viral</span>
                    </button>
                </div>

                <!-- ===================== AVATAR ULTRA-ESPECÃFICO ===================== -->
                <div class="avatar-section">
                    <h3>ğŸ§  Avatar Ultra-EspecÃ­fico</h3>
                    <p class="section-description">Crea un perfil psicolÃ³gico profundo de tu cliente ideal</p>
                    
                    <div class="avatar-config">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>ğŸ‘¤ GÃ©nero Principal:</label>
                                <select id="avatarGender">
                                    <option value="femenino">Femenino</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="mixto" selected>Mixto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ğŸ‚ Rango de Edad:</label>
                                <select id="avatarAge">
                                    <option value="18-25">18-25 (Gen Z)</option>
                                    <option value="25-35" selected>25-35 (Millennials)</option>
                                    <option value="35-45">35-45 (Gen X JÃ³venes)</option>
                                    <option value="45-55">45-55 (Gen X)</option>
                                    <option value="55+">55+ (Boomers)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label>ğŸ’° Nivel SocioeconÃ³mico:</label>
                                <select id="avatarIncome">
                                    <option value="bajo">Bajo ($20K-$40K)</option>
                                    <option value="medio" selected>Medio ($40K-$80K)</option>
                                    <option value="medio-alto">Medio-Alto ($80K-$150K)</option>
                                    <option value="alto">Alto ($150K+)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ğŸ  SituaciÃ³n Familiar:</label>
                                <select id="avatarFamily">
                                    <option value="soltero">Soltero/a</option>
                                    <option value="pareja">En pareja sin hijos</option>
                                    <option value="familia" selected>Familia con hijos</option>
                                    <option value="divorciado">Divorciado/a</option>
                                    <option value="viudo">Viudo/a</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ğŸ¯ Principal FrustraciÃ³n/Problema:</label>
                            <textarea id="avatarMainProblem" rows="2" 
                                    placeholder="Ej: No tiene tiempo para hacer ejercicio por el trabajo y los niÃ±os..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>ğŸŒŸ MÃ¡ximo Deseo/AspiraciÃ³n:</label>
                            <textarea id="avatarMainDesire" rows="2" 
                                    placeholder="Ej: Verse y sentirse como antes del embarazo, tener energÃ­a para jugar con sus hijos..."></textarea>
                        </div>
                    </div>
                    
                    <button class="btn btn-avatar" id="generateAvatarBtn">
                        <span class="btn-icon">ğŸ§ </span>
                        <span class="btn-text">Crear Avatar Completo</span>
                    </button>
                </div>

                <!-- ===================== RESULTADOS DE CONTENIDO Y AVATAR ===================== -->
                <div id="contentResults" class="content-results hidden">
                    <h2>ğŸ¯ Contenido Viral Generado</h2>
                    <div id="contentTabs" class="content-tabs">
                        <!-- Tabs dinÃ¡micos se generan aquÃ­ -->
                    </div>
                    <div id="contentDisplay" class="content-display">
                        <!-- Contenido dinÃ¡mico se muestra aquÃ­ -->
                    </div>
                    
                    <div class="content-actions">
                        <button class="btn btn-secondary" id="copyContentBtn">ğŸ“‹ Copiar Todo</button>
                        <button class="btn btn-secondary" id="downloadContentBtn">ğŸ“„ Descargar</button>
                        <button class="btn btn-secondary" id="regenerateContentBtn">ğŸ”„ Regenerar</button>
                    </div>
                </div>

                <div id="avatarResults" class="avatar-results hidden">
                    <h2>ğŸ§  Avatar Ultra-EspecÃ­fico</h2>
                    <div id="avatarDisplay" class="avatar-display">
                        <!-- Avatar completo se muestra aquÃ­ -->
                    </div>
                    
                    <div class="avatar-actions">
                        <button class="btn btn-secondary" id="copyAvatarBtn">ğŸ“‹ Copiar Avatar</button>
                        <button class="btn btn-secondary" id="downloadAvatarBtn">ğŸ“„ Descargar</button>
                        <button class="btn btn-secondary" id="exportPersonasBtn">ğŸ‘¥ Exportar Personas</button>
                    </div>
                </div>

                    <!-- Estimaciones en tiempo real -->
                    <div id="quickEstimations" class="quick-estimations hidden"></div>
                </div>

                <div class="form-group">
                    <label>ğŸ“‹ Keywords o productos especÃ­ficos (opcional):</label>
                    <textarea id="keywords" rows="3" placeholder="Ej: proteÃ­na whey, curso de yoga, smartwatch fitness..."></textarea>
                </div>

                <button class="btn btn-primary" id="generateBtn">
                    <span class="btn-icon">ğŸš€</span>
                    <span class="btn-text">Detectar Productos Ganadores</span>
                </button>
            </div>

            <!-- Debug Section -->
            <div id="debugSection" class="debug-section hidden">
                <h3>ğŸ”§ InformaciÃ³n de Debug</h3>
                <div class="debug-content">
                    <div class="debug-item">
                        <strong>Estado API:</strong> <span id="debugApiStatus">No probada</span>
                    </div>
                    <div class="debug-item">
                        <strong>Productos extraÃ­dos:</strong> <span id="debugProductCount">0</span>
                    </div>
                    <div class="debug-item">
                        <strong>Ãšltima respuesta:</strong>
                        <pre id="debugResponse">Sin respuesta aÃºn</pre>
                    </div>
                </div>
            </div>

            <!-- Loading -->
            <div id="loading" class="loading hidden">
                <div class="loading-content">
                    <div class="spinner"></div>
                    <h3>ğŸ” Analizando el mercado con IA...</h3>
                    <p>Detectando productos ganadores y oportunidades de afiliaciÃ³n</p>
                    <div class="loading-steps">
                        <div class="step active" id="step1">ğŸ§  Procesando anÃ¡lisis psicolÃ³gico...</div>
                        <div class="step" id="step2">ğŸ“Š Calculando mÃ©tricas financieras...</div>
                        <div class="step" id="step3">ğŸ” Evaluando competencia...</div>
                        <div class="step" id="step4">âœ¨ Generando recomendaciones...</div>
                    </div>
                </div>
            </div>

            <!-- Results -->
            <div id="resultados" class="results hidden">
                <div class="results-header">
                    <h2>ğŸ’° Productos Ganadores Detectados</h2>
                    <div id="metricsOverview" class="metrics-overview hidden"></div>
                </div>
                
                <div class="results-content">
                    <div id="listaProductos"></div>
                    
                    <!-- SecciÃ³n de insights adicionales -->
                    <div id="additionalInsights" class="additional-insights hidden">
                        <h3>ğŸ¯ Insights Adicionales del Mercado</h3>
                        <div id="nicheAnalysis" class="insight-section hidden"></div>
                        <div id="ecosystemAnalysis" class="insight-section hidden"></div>
                    </div>
                </div>
                
                <div class="export-section">
                    <h4>ğŸ“¤ Exportar Resultados</h4>
                    <div class="export-buttons">
                        <button class="btn btn-secondary" id="copyBtn">
                            <span class="btn-icon">ğŸ“‹</span>
                            Copiar
                        </button>
                        <button class="btn btn-secondary" id="downloadBtn">
                            <span class="btn-icon">ğŸ“„</span>
                            Descargar TXT
                        </button>
                        <button class="btn btn-secondary" id="downloadExcelBtn">
                            <span class="btn-icon">ğŸ“Š</span>
                            Exportar CSV
                        </button>
                        <button class="btn btn-secondary" id="toggleDebugBtn">
                            <span class="btn-icon">ğŸ”§</span>
                            Debug
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>